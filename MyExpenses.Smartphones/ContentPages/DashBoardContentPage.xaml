<?xml version="1.0" encoding="utf-8"?>

<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="MyExpenses.Smartphones.ContentPages.DashBoardContentPage"
             xmlns:dg="clr-namespace:Maui.DataGrid;assembly=Maui.DataGrid"
             xmlns:converters="clr-namespace:MyExpenses.Smartphones.Converters"
             xmlns:pickers="clr-namespace:MyExpenses.Smartphones.UserControls.Pickers"
             BindingContext="{Binding Source={RelativeSource Self}}">

    <ContentPage.Resources>
        <converters:TotalToIconConverter x:Key="TotalToIconConverter" />
        <converters:ValueSymbolConverter x:Key="ValueSymbolConverter" />
    </ContentPage.Resources>

    <ContentPage.Content>

        <Grid>

            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <Ellipse Grid.Row="0"
                     HeightRequest="192"
                     WidthRequest="{Binding HeightRequest, Source={RelativeSource Self}}"
                     Stroke="{AppThemeBinding Light={StaticResource Black}, Dark={StaticResource White}}"
                     StrokeThickness="3">
            </Ellipse>

            <VerticalStackLayout Grid.Row="0"
                                 VerticalOptions="Center"
                                 HorizontalOptions="Center">

                <Path Aspect="Uniform"
                      Fill="{AppThemeBinding Light={StaticResource Black}, Dark={StaticResource White}}"
                      Data="{Binding CurrentVTotalByAccount.Total, FallbackValue=0, Mode=OneWay, Converter={StaticResource TotalToIconConverter}}"
                      HorizontalOptions="Center"
                      VerticalOptions="Center"
                      HeightRequest="96"
                      WidthRequest="{Binding HeightRequest, Source={RelativeSource Self}}">
                </Path>

                <Label HorizontalTextAlignment="Center"
                       FontAttributes="Bold"
                       FontSize="18"
                       Margin="0, 5">
                    <Label.Text>
                        <MultiBinding Converter="{StaticResource ValueSymbolConverter}">
                            <Binding Path="CurrentVTotalByAccount.Total" FallbackValue="" Mode="OneWay" />
                            <Binding Path="CurrentVTotalByAccount.Symbol" FallbackValue="" Mode="OneWay" />
                        </MultiBinding>
                    </Label.Text>
                </Label>

            </VerticalStackLayout>

            <Grid Grid.Row="2">

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <pickers:CustomPicker Grid.Column="0"
                                      ItemsSource="{Binding Years, Mode=OneWay}"
                                      SelectedItem="{Binding SelectedYear, Mode=TwoWay}"
                                      GeometryColor="{AppThemeBinding Light={StaticResource Black}, Dark={StaticResource White}}"
                                      PlaceholderText="test"
                                      HasClearButton="True"
                                      SelectedIndexChanged="CustomPicker_OnSelectedIndexChanged">
                </pickers:CustomPicker>

                <pickers:CustomPicker Grid.Column="1"
                                      ItemsSource="{Binding Months, Mode=OneWay}"
                                      SelectedItem="{Binding SelectedMonth, Mode=TwoWay}"
                                      GeometryColor="{AppThemeBinding Light={StaticResource Black}, Dark={StaticResource White}}"
                                      PlaceholderText="test"
                                      HasClearButton="True"
                                      SelectedIndexChanged="CustomPicker_OnSelectedIndexChanged">
                </pickers:CustomPicker>

            </Grid>

        </Grid>

    </ContentPage.Content>

</ContentPage>